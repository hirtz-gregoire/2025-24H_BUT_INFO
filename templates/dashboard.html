{% extends "layout.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}

  {% include "flash.html" %}

  <h1 class="text-2xl font-bold mb-4">Bienvenue {{ current_user.username }}</h1>

  <form method="POST" class="mb-6 w-full max-w-md">
    <input name="title" placeholder="Nouvelle tâche" class="w-full p-2 border rounded mb-2" />
    <button class="bg-blue-500 text-white p-2 rounded w-full hover:bg-blue-600">Ajouter</button>
  </form>

  <ul class="w-full max-w-md">
    {% for task in tasks %}
      <li class="bg-white shadow p-3 mb-2 flex justify-between items-center rounded">
        <span class="{{ 'line-through text-gray-500' if task.done else '' }}">
          {{ task.title }}
        </span>
        <div class="flex gap-2">
          <a href="{{ url_for('toggle_task', task_id=task.id) }}" class="text-blue-500 hover:underline">
            {% if task.done %}✅{% else %}🔲{% endif %}
          </a>
          <a href="{{ url_for('delete_task', task_id=task.id) }}" class="text-red-500 hover:underline">
            🗑️
          </a>
        </div>
      </li>
    {% else %}
      <p class="text-gray-600 italic text-center">Aucune tâche encore.</p>
    {% endfor %}
  </ul>

  <a href="{{ url_for('logout') }}" class="mt-6 text-red-600 underline block">Se déconnecter</a>
{% endblock %}
